<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us - Nuvue Studio</title>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="icon" href="./image/favicon.png" />
  </head>
  <body>
    <!-- Header -->
    <header><div id="header"></div></header>

    <!-- Sidebars -->
    <aside><div id="edit-sidebar"></div></aside>
    <aside><div id="search-form-container"></div></aside>
    <aside><div id="sidebar"></div></aside>

    <!-- Main Content -->
    <main>
      <!-- Banner -->
      <div class="section-banner">
        <div class="banner-layout-wrapper">
          <div class="banner-layout text-center">
            <h2 class="title-heading">Contact Us</h2>
            <nav class="breadcrumb">
              <a href="./index.html">Home</a> /
              <span class="current-page">Contact Us</span>
            </nav>
          </div>
        </div>
      </div>

      <!-- Contact Section -->
      <div class="section">
        <div class="hero-container">
          <div class="row row-cols-xl-2 row-cols-1 g-5">
            <!-- Contact Info -->
            <div class="col col-xl-5">
              <div class="contact-title-wrapper">
                <div class="card contact-title">
                  <div class="sub-heading">
                    <i class="fa-regular fa-circle-dot"></i> Reach out to us
                  </div>
                  <h2 class="title-heading">Get in Touch</h2>
                  <p>
                    Reach out to us for tailored digital solutions that turn
                    ambitions into measurable results built to perform and scale
                    with your goals.
                  </p>

                  <div
                    class="d-flex flex-column flex-md-row align-items-center gspace-2"
                  >
                    <i class="fa-solid fa-phone-volume accent-color"></i>
                    <div>
                      <span>Phone Number</span>
                      <h5>+880 1715 043027</h5>
                    </div>
                  </div>
                  <div
                    class="d-flex flex-column flex-md-row align-items-center gspace-2"
                  >
                    <i class="fa-solid fa-envelope accent-color"></i>
                    <div>
                      <span>Email Address</span>
                      <h5>nnuvuestudio@gmail.com</h5>
                    </div>
                  </div>
                  <div
                    class="d-flex flex-column flex-md-row align-items-center gspace-2"
                  >
                    <i class="fa-solid fa-location-dot accent-color"></i>
                    <div>
                      <span>Office Address</span>
                      <h5>
                        Nuvue HQ - 64, North Circular Road, Free School Street,
                        Hatirpool, Dhaka, Bangladesh
                      </h5>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Contact Form -->
            <div class="col col-xl-7">
              <div
                id="success-message"
                class="alert success hidden"
                style="background-color: var(--success-color)"
              >
                <span><i class="fa-solid fa-2xl fa-check"></i></span>
                <p>Thank you! Form submitted successfully.</p>
              </div>
              <div
                id="error-message"
                class="alert error hidden"
                style="background-color: var(--error-color)"
              >
                <span><i class="fa-solid fa-2xl fa-xmark"></i></span>
                <p>Oops! Form submission failed. Please try again.</p>
              </div>

              <div class="form-layout-wrapper">
                <!-- Firebase Connection Status removed from UI -->
                <div class="card form-layout">
                  <h3 class="title-heading">
                    Let's Talk About Your Next Project
                  </h3>
                  <form id="contactForm" class="form">
                    <div class="row row-cols-md-2 row-cols-1 g-3">
                      <div class="col">
                        <input
                          type="text"
                          id="first-name"
                          placeholder="First Name"
                          required
                        />
                      </div>
                      <div class="col">
                        <input
                          type="text"
                          id="last-name"
                          placeholder="Last Name"
                          required
                        />
                      </div>
                    </div>
                    <div class="row row-cols-md-2 row-cols-1 g-3">
                      <div class="col">
                        <input
                          type="email"
                          id="email"
                          placeholder="Email Address"
                          required
                        />
                      </div>
                      <div class="col">
                        <input
                          type="text"
                          id="subject"
                          placeholder="Subject"
                          required
                        />
                      </div>
                    </div>
                    <textarea
                      id="message"
                      rows="5"
                      placeholder="Message"
                      required
                    ></textarea>
                    <div class="form-button-container">
                      <button
                        type="submit"
                        class="btn btn-accent d-flex flex-row align-items-center px-4"
                        style="border: 1px solid var(--accent-color)"
                      >
                        <span class="btn-title">Send a Message</span>
                        <i
                          class="fa-solid fa-arrow-right"
                          style="color: var(--primary)"
                        ></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Map -->
      <div class="section pt-0">
        <div class="hero-container">
          <iframe
            loading="lazy"
            class="maps overflow-hidden"
            src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d456.51149512965213!2d90.39011896653572!3d23.7440998568928!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sbd!4v1756066806975!5m2!1sen!2sbd"
            title="Hatirpool, Dhaka, Bangladesh"
          >
          </iframe>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer><div id="footer"></div></footer>

    <!-- Vendor Scripts -->
    <script src="js/vendor/jquery.min.js"></script>
    <script src="js/vendor/bootstrap.bundle.min.js"></script>
    <script src="js/vendor/swiper-bundle.min.js"></script>
    <script src="js/script.js"></script>
    <script src="js/swiper-script.js"></script>
    <script src="js/video_embedded.js"></script>

    <!-- Firebase SDK + Form Submit -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import {
        getFirestore,
        collection,
        addDoc,
      } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
      import {
        initializeAppCheck,
        ReCaptchaV3Provider,
      } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app-check.js";

      // Firebase Config (production)
      const firebaseConfig = {
        apiKey: "AIzaSyCiILxAGEaeCyD36Stl9C55DknuKG-qjH4",
        authDomain: "nuvue-studio.firebaseapp.com",
        projectId: "nuvue-studio",
        storageBucket: "nuvue-studio.firebasestorage.app",
        messagingSenderId: "524120386924",
        appId: "1:524120386924:web:94cf6cb0375bd984165749",
        measurementId: "G-NJND695368",
      };

      // Firebase Connection Status
      let db;
      let firebaseConnected = false;
      try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        // App Check (reCAPTCHA v3) â€” replace YOUR_RECAPTCHA_SITE_KEY
        initializeAppCheck(app, {
          provider: new ReCaptchaV3Provider("YOUR_RECAPTCHA_SITE_KEY"),
          isTokenAutoRefreshEnabled: true,
        });
        firebaseConnected = true;
      } catch (err) {
        firebaseConnected = false;
      }

      // Form Submit
      const form = document.getElementById("contactForm");
      const successEl = document.getElementById("success-message");
      const errorEl = document.getElementById("error-message");
      const submitBtn = form.querySelector('button[type="submit"]');

      // Popup Notification
      function showPopup(message, type = "success") {
        const popup = document.createElement("div");
        popup.className = `popup-notification ${type}`;
        popup.innerHTML = `<span>${
          type === "success"
            ? "<i class='fa-solid fa-check'></i>"
            : "<i class='fa-solid fa-xmark'></i>"
        }</span> <span>${message}</span>`;
        popup.style.position = "fixed";
        popup.style.top = "30px";
        popup.style.right = "30px";
        popup.style.zIndex = "9999";
        popup.style.background = type === "success" ? "#4BB543" : "#FF3333";
        popup.style.color = "#fff";
        popup.style.padding = "1rem 2rem";
        popup.style.borderRadius = "8px";
        popup.style.boxShadow = "0 2px 8px rgba(0,0,0,0.15)";
        popup.style.fontSize = "1.1rem";
        document.body.appendChild(popup);
        setTimeout(() => {
          popup.remove();
        }, 3000);
      }

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        successEl.classList.add("hidden");
        errorEl.classList.add("hidden");
        submitBtn.disabled = true;

        const firstName = document.getElementById("first-name").value.trim();
        const lastName = document.getElementById("last-name").value.trim();
        const email = document.getElementById("email").value.trim();
        const subject = document.getElementById("subject").value.trim();
        const message = document.getElementById("message").value.trim();

        if (!firebaseConnected) {
          errorEl.classList.remove("hidden");
          showPopup("Cannot submit: Firebase not connected.", "error");
          submitBtn.disabled = false;
          return;
        }

        try {
          await addDoc(collection(db, "contacts"), {
            firstName,
            lastName,
            email,
            subject,
            message,
            timestamp: new Date(),
          });
          successEl.classList.remove("hidden");
          form.reset();
        } catch (err) {
          console.error("Firestore error:", err);
          errorEl.classList.remove("hidden");
        } finally {
          submitBtn.disabled = false;
        }
      });
    </script>
  </body>
</html>
